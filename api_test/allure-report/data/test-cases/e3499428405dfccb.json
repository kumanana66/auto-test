{"uid":"e3499428405dfccb","name":"test_user_auth[case3]","fullName":"tests.test_user_auth#test_user_auth","historyId":"51f069dd7b32ed370ad5b512ab72ac47","time":{"start":1753988698139,"stop":1753988698168,"duration":29},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'strip'","statusTrace":"case = {'case_id': 'auth_004', 'expected_code': 400, 'expected_message': '用户名长度需在6-20位之间', 'expected_success': False, ...}\ntest_user = {'email': 'test_kpgwus@example.com', 'token': 'eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0X2twZ3d1cyIsImlhdCI6MTc1Mzk4ODY5NywiZXhwIjoxNzUzOTk1ODk3fQ.pUC5lxPuu-S05ZvpHbpJOGDws9sZA88OaQ6AqmrKsvU', 'username': 'test_kpgwus'}\nimage_fixtures = {'large_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmp8tiagkxy.jpg', 'large_png_image': 'C:\\\\Users\\\\huawei\\...ata\\\\Local\\\\Temp\\\\tmpczzwir91.txt', 'small_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmp2aqv1u53.jpg', ...}\n\n    @allure.feature(\"用户认证模块\")\n    @pytest.mark.parametrize(\"case\", CASES)\n    def test_user_auth(case, test_user, image_fixtures):  # 使用test_user而非auth_token\n        allure.story(case[\"name\"])\n        allure.title(f\"{case['case_id']}: {case['name']}\")\n        logger.info(f\"开始执行用例: {case['case_id']} - {case['name']}\")\n    \n        # 1. 文件映射（仅文件上传用例需要）\n        file_map = {\n            \"test_avatar.jpg\": image_fixtures[\"small_jpg_image\"],\n            \"large_avatar.jpg\": image_fixtures[\"large_jpg_image\"],\n            \"test_avatar.png\": image_fixtures[\"small_png_image\"],\n            \"large_avatar.png\": image_fixtures[\"large_png_image\"],\n            \"test_file.txt\": image_fixtures[\"non_image_file\"]\n        }\n    \n        # 2. 预处理请求\n        request_data = preprocess_request(case, test_user[\"token\"], file_map)  # 使用测试用户的token\n    \n        # 3. 处理所有需要验证码的场景（覆盖注册、更新密码等）\n        json_data = request_data.get(\"json\", {})\n>       verify_code_placeholder = json_data.get(\"verifyCode\", \"\").strip()\nE       AttributeError: 'NoneType' object has no attribute 'strip'\n\ntests\\test_user_auth.py:67: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_user","time":{"start":1753988696306,"stop":1753988697377,"duration":1071},"status":"passed","steps":[{"name":"发送请求：'POST' '/auth/send-verify-code'","time":{"start":1753988696306,"stop":1753988697071,"duration":765},"status":"passed","steps":[],"attachments":[{"uid":"e564f083d69a359a","name":"请求信息","source":"e564f083d69a359a.txt","type":"text/plain","size":52},{"uid":"a118e9d2795eb0ee","name":"请求头","source":"a118e9d2795eb0ee.txt","type":"text/plain","size":45},{"uid":"cd8567202d434c7c","name":"请求参数","source":"cd8567202d434c7c.json","type":"application/json","size":44},{"uid":"c22a0965623f2b1c","name":"响应信息","source":"c22a0965623f2b1c.txt","type":"text/plain","size":14},{"uid":"18c5fae7c0a9b42f","name":"响应体","source":"18c5fae7c0a9b42f.json","type":"application/json","size":84}],"parameters":[{"name":"method","value":"'POST'"},{"name":"endpoint","value":"'/auth/send-verify-code'"},{"name":"headers","value":"None"},{"name":"params","value":"{'email': 'test_kpgwus@example.com'}"},{"name":"json","value":"None"},{"name":"files","value":"None"},{"name":"token","value":"None"}],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"从数据库获取验证码：'test_kpgwus@example.com'","time":{"start":1753988697072,"stop":1753988697075,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'test_kpgwus@example.com'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"发送请求：'POST' '/auth/register'","time":{"start":1753988697075,"stop":1753988697228,"duration":153},"status":"passed","steps":[],"attachments":[{"uid":"fbb0f64f2f1b5657","name":"请求信息","source":"fbb0f64f2f1b5657.txt","type":"text/plain","size":44},{"uid":"2e1fc3a279e3e155","name":"请求头","source":"2e1fc3a279e3e155.txt","type":"text/plain","size":45},{"uid":"3b3b1e7cefa3863c","name":"请求参数","source":"3b3b1e7cefa3863c.json","type":"application/json","size":121},{"uid":"c39d7d845066e177","name":"响应信息","source":"c39d7d845066e177.txt","type":"text/plain","size":14},{"uid":"fa566c851ba09cab","name":"响应体","source":"fa566c851ba09cab.json","type":"application/json","size":53}],"parameters":[{"name":"method","value":"'POST'"},{"name":"endpoint","value":"'/auth/register'"},{"name":"headers","value":"None"},{"name":"params","value":"None"},{"name":"json","value":"{'username': 'test_kpgwus', 'password': 'Test123456', 'email': 'test_kpgwus@example.com', 'verifyCode': '244049'}"},{"name":"files","value":"None"},{"name":"token","value":"None"}],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"发送请求：'POST' '/auth/login'","time":{"start":1753988697228,"stop":1753988697377,"duration":149},"status":"passed","steps":[],"attachments":[{"uid":"6d51a1017cf71f8d","name":"请求信息","source":"6d51a1017cf71f8d.txt","type":"text/plain","size":41},{"uid":"61b1a49e36e92680","name":"请求头","source":"61b1a49e36e92680.txt","type":"text/plain","size":45},{"uid":"7feaf7dd78c655bb","name":"请求参数","source":"7feaf7dd78c655bb.json","type":"application/json","size":61},{"uid":"11ecd0e79739a18e","name":"响应信息","source":"11ecd0e79739a18e.txt","type":"text/plain","size":14},{"uid":"3f4f8841ea761cf8","name":"响应体","source":"3f4f8841ea761cf8.json","type":"application/json","size":217}],"parameters":[{"name":"method","value":"'POST'"},{"name":"endpoint","value":"'/auth/login'"},{"name":"headers","value":"None"},{"name":"params","value":"None"},{"name":"json","value":"{'username': 'test_kpgwus', 'password': 'Test123456'}"},{"name":"files","value":"None"},{"name":"token","value":"None"}],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[],"parameters":[],"attachmentsCount":15,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":4},{"name":"small_jpg_image","time":{"start":1753988697377,"stop":1753988697457,"duration":80},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_jpg_image","time":{"start":1753988697457,"stop":1753988697794,"duration":337},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"small_png_image","time":{"start":1753988697794,"stop":1753988697836,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_png_image","time":{"start":1753988697836,"stop":1753988698137,"duration":301},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"non_image_file","time":{"start":1753988698138,"stop":1753988698138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"image_fixtures","time":{"start":1753988698138,"stop":1753988698138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'strip'","statusTrace":"case = {'case_id': 'auth_004', 'expected_code': 400, 'expected_message': '用户名长度需在6-20位之间', 'expected_success': False, ...}\ntest_user = {'email': 'test_kpgwus@example.com', 'token': 'eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0X2twZ3d1cyIsImlhdCI6MTc1Mzk4ODY5NywiZXhwIjoxNzUzOTk1ODk3fQ.pUC5lxPuu-S05ZvpHbpJOGDws9sZA88OaQ6AqmrKsvU', 'username': 'test_kpgwus'}\nimage_fixtures = {'large_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmp8tiagkxy.jpg', 'large_png_image': 'C:\\\\Users\\\\huawei\\...ata\\\\Local\\\\Temp\\\\tmpczzwir91.txt', 'small_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmp2aqv1u53.jpg', ...}\n\n    @allure.feature(\"用户认证模块\")\n    @pytest.mark.parametrize(\"case\", CASES)\n    def test_user_auth(case, test_user, image_fixtures):  # 使用test_user而非auth_token\n        allure.story(case[\"name\"])\n        allure.title(f\"{case['case_id']}: {case['name']}\")\n        logger.info(f\"开始执行用例: {case['case_id']} - {case['name']}\")\n    \n        # 1. 文件映射（仅文件上传用例需要）\n        file_map = {\n            \"test_avatar.jpg\": image_fixtures[\"small_jpg_image\"],\n            \"large_avatar.jpg\": image_fixtures[\"large_jpg_image\"],\n            \"test_avatar.png\": image_fixtures[\"small_png_image\"],\n            \"large_avatar.png\": image_fixtures[\"large_png_image\"],\n            \"test_file.txt\": image_fixtures[\"non_image_file\"]\n        }\n    \n        # 2. 预处理请求\n        request_data = preprocess_request(case, test_user[\"token\"], file_map)  # 使用测试用户的token\n    \n        # 3. 处理所有需要验证码的场景（覆盖注册、更新密码等）\n        json_data = request_data.get(\"json\", {})\n>       verify_code_placeholder = json_data.get(\"verifyCode\", \"\").strip()\nE       AttributeError: 'NoneType' object has no attribute 'strip'\n\ntests\\test_user_auth.py:67: AttributeError","steps":[{"name":"从数据库获取验证码：'test_p54eft@example.com'","time":{"start":1753988698139,"stop":1753988698167,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'test_p54eft@example.com'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[{"uid":"2b24feeabc6d573f","name":"log","source":"2b24feeabc6d573f.txt","type":"text/plain","size":1432},{"uid":"b1f814ad577ad598","name":"stderr","source":"b1f814ad577ad598.txt","type":"text/plain","size":1075}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false,"stepsCount":1},"afterStages":[{"name":"non_image_file::0","time":{"start":1753988698176,"stop":1753988698177,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_png_image::0","time":{"start":1753988698177,"stop":1753988698181,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"small_png_image::0","time":{"start":1753988698182,"stop":1753988698185,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_jpg_image::0","time":{"start":1753988698186,"stop":1753988698191,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"small_jpg_image::0","time":{"start":1753988698193,"stop":1753988698195,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"test_user::0","time":{"start":1753988698196,"stop":1753988698205,"duration":9},"status":"passed","steps":[{"name":"清理测试数据：'test_kpgwus@example.com'","time":{"start":1753988698196,"stop":1753988698203,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'test_kpgwus@example.com'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":1}],"labels":[{"name":"feature","value":"用户认证模块"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_user_auth"},{"name":"host","value":"CYJ"},{"name":"thread","value":"20208-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_user_auth"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'case_id': 'auth_004', 'name': '用户名长度不足6位', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test1', 'password': 'Test123456', 'email': 'test_p54eft@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '用户名长度需在6-20位之间'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":[]},"source":"e3499428405dfccb.json","parameterValues":["{'case_id': 'auth_004', 'name': '用户名长度不足6位', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test1', 'password': 'Test123456', 'email': 'test_p54eft@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '用户名长度需在6-20位之间'}"]}