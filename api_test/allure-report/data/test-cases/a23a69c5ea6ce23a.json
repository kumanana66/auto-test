{"uid":"a23a69c5ea6ce23a","name":"test_user_auth[case12]","fullName":"tests.test_user_auth#test_user_auth","historyId":"37fb90a9c91129494c38afd17cfab631","time":{"start":1753988716452,"stop":1753988716468,"duration":16},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'strip'","statusTrace":"case = {'case_id': 'auth_013', 'expected_code': 400, 'expected_message': '两次输入的密码不一致', 'expected_success': False, ...}\ntest_user = {'email': 'test_tvralb@example.com', 'token': 'eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0X3R2cmFsYiIsImlhdCI6MTc1Mzk4ODcxNSwiZXhwIjoxNzUzOTk1OTE1fQ.2qLIO1nbNjJuJ9bUXfsFGUx6tAlkCWskiNAzLn685IE', 'username': 'test_tvralb'}\nimage_fixtures = {'large_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmpuxsr2i_p.jpg', 'large_png_image': 'C:\\\\Users\\\\huawei\\...ata\\\\Local\\\\Temp\\\\tmp9urbr89c.txt', 'small_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmpgecvhdfk.jpg', ...}\n\n    @allure.feature(\"用户认证模块\")\n    @pytest.mark.parametrize(\"case\", CASES)\n    def test_user_auth(case, test_user, image_fixtures):  # 使用test_user而非auth_token\n        allure.story(case[\"name\"])\n        allure.title(f\"{case['case_id']}: {case['name']}\")\n        logger.info(f\"开始执行用例: {case['case_id']} - {case['name']}\")\n    \n        # 1. 文件映射（仅文件上传用例需要）\n        file_map = {\n            \"test_avatar.jpg\": image_fixtures[\"small_jpg_image\"],\n            \"large_avatar.jpg\": image_fixtures[\"large_jpg_image\"],\n            \"test_avatar.png\": image_fixtures[\"small_png_image\"],\n            \"large_avatar.png\": image_fixtures[\"large_png_image\"],\n            \"test_file.txt\": image_fixtures[\"non_image_file\"]\n        }\n    \n        # 2. 预处理请求\n        request_data = preprocess_request(case, test_user[\"token\"], file_map)  # 使用测试用户的token\n    \n        # 3. 处理所有需要验证码的场景（覆盖注册、更新密码等）\n        json_data = request_data.get(\"json\", {})\n>       verify_code_placeholder = json_data.get(\"verifyCode\", \"\").strip()\nE       AttributeError: 'NoneType' object has no attribute 'strip'\n\ntests\\test_user_auth.py:67: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_user","time":{"start":1753988714382,"stop":1753988715495,"duration":1113},"status":"passed","steps":[{"name":"发送请求：'POST' '/auth/send-verify-code'","time":{"start":1753988714382,"stop":1753988715140,"duration":758},"status":"passed","steps":[],"attachments":[{"uid":"7b78f7a150d1bfa6","name":"请求信息","source":"7b78f7a150d1bfa6.txt","type":"text/plain","size":52},{"uid":"a14d70f188ac84b4","name":"请求头","source":"a14d70f188ac84b4.txt","type":"text/plain","size":45},{"uid":"79f35cb0891767bf","name":"请求参数","source":"79f35cb0891767bf.json","type":"application/json","size":44},{"uid":"b1c89fbeeb182857","name":"响应信息","source":"b1c89fbeeb182857.txt","type":"text/plain","size":14},{"uid":"f3ad66ecda6c502c","name":"响应体","source":"f3ad66ecda6c502c.json","type":"application/json","size":84}],"parameters":[{"name":"method","value":"'POST'"},{"name":"endpoint","value":"'/auth/send-verify-code'"},{"name":"headers","value":"None"},{"name":"params","value":"{'email': 'test_tvralb@example.com'}"},{"name":"json","value":"None"},{"name":"files","value":"None"},{"name":"token","value":"None"}],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"从数据库获取验证码：'test_tvralb@example.com'","time":{"start":1753988715140,"stop":1753988715144,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'test_tvralb@example.com'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"发送请求：'POST' '/auth/register'","time":{"start":1753988715144,"stop":1753988715312,"duration":168},"status":"passed","steps":[],"attachments":[{"uid":"974ff7ceb14ea59","name":"请求信息","source":"974ff7ceb14ea59.txt","type":"text/plain","size":44},{"uid":"cfd4993392cbf1b4","name":"请求头","source":"cfd4993392cbf1b4.txt","type":"text/plain","size":45},{"uid":"7af8f91c5eb3fdcc","name":"请求参数","source":"7af8f91c5eb3fdcc.json","type":"application/json","size":121},{"uid":"ea62e8c4ece47f8","name":"响应信息","source":"ea62e8c4ece47f8.txt","type":"text/plain","size":14},{"uid":"b9b3672cdfa66f00","name":"响应体","source":"b9b3672cdfa66f00.json","type":"application/json","size":53}],"parameters":[{"name":"method","value":"'POST'"},{"name":"endpoint","value":"'/auth/register'"},{"name":"headers","value":"None"},{"name":"params","value":"None"},{"name":"json","value":"{'username': 'test_tvralb', 'password': 'Test123456', 'email': 'test_tvralb@example.com', 'verifyCode': '228424'}"},{"name":"files","value":"None"},{"name":"token","value":"None"}],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"发送请求：'POST' '/auth/login'","time":{"start":1753988715313,"stop":1753988715495,"duration":182},"status":"passed","steps":[],"attachments":[{"uid":"493a8108c3a95eae","name":"请求信息","source":"493a8108c3a95eae.txt","type":"text/plain","size":41},{"uid":"857c8d0d42039acc","name":"请求头","source":"857c8d0d42039acc.txt","type":"text/plain","size":45},{"uid":"56935026b7e23c4","name":"请求参数","source":"56935026b7e23c4.json","type":"application/json","size":61},{"uid":"ab7daa2f8e3b7804","name":"响应信息","source":"ab7daa2f8e3b7804.txt","type":"text/plain","size":14},{"uid":"ee5283e97a3ec40d","name":"响应体","source":"ee5283e97a3ec40d.json","type":"application/json","size":217}],"parameters":[{"name":"method","value":"'POST'"},{"name":"endpoint","value":"'/auth/login'"},{"name":"headers","value":"None"},{"name":"params","value":"None"},{"name":"json","value":"{'username': 'test_tvralb', 'password': 'Test123456'}"},{"name":"files","value":"None"},{"name":"token","value":"None"}],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[],"parameters":[],"attachmentsCount":15,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":4},{"name":"small_jpg_image","time":{"start":1753988715495,"stop":1753988715615,"duration":120},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_jpg_image","time":{"start":1753988715615,"stop":1753988716106,"duration":491},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"small_png_image","time":{"start":1753988716107,"stop":1753988716139,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_png_image","time":{"start":1753988716139,"stop":1753988716449,"duration":310},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"non_image_file","time":{"start":1753988716449,"stop":1753988716451,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"image_fixtures","time":{"start":1753988716451,"stop":1753988716451,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'strip'","statusTrace":"case = {'case_id': 'auth_013', 'expected_code': 400, 'expected_message': '两次输入的密码不一致', 'expected_success': False, ...}\ntest_user = {'email': 'test_tvralb@example.com', 'token': 'eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0X3R2cmFsYiIsImlhdCI6MTc1Mzk4ODcxNSwiZXhwIjoxNzUzOTk1OTE1fQ.2qLIO1nbNjJuJ9bUXfsFGUx6tAlkCWskiNAzLn685IE', 'username': 'test_tvralb'}\nimage_fixtures = {'large_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmpuxsr2i_p.jpg', 'large_png_image': 'C:\\\\Users\\\\huawei\\...ata\\\\Local\\\\Temp\\\\tmp9urbr89c.txt', 'small_jpg_image': 'C:\\\\Users\\\\huawei\\\\AppData\\\\Local\\\\Temp\\\\tmpgecvhdfk.jpg', ...}\n\n    @allure.feature(\"用户认证模块\")\n    @pytest.mark.parametrize(\"case\", CASES)\n    def test_user_auth(case, test_user, image_fixtures):  # 使用test_user而非auth_token\n        allure.story(case[\"name\"])\n        allure.title(f\"{case['case_id']}: {case['name']}\")\n        logger.info(f\"开始执行用例: {case['case_id']} - {case['name']}\")\n    \n        # 1. 文件映射（仅文件上传用例需要）\n        file_map = {\n            \"test_avatar.jpg\": image_fixtures[\"small_jpg_image\"],\n            \"large_avatar.jpg\": image_fixtures[\"large_jpg_image\"],\n            \"test_avatar.png\": image_fixtures[\"small_png_image\"],\n            \"large_avatar.png\": image_fixtures[\"large_png_image\"],\n            \"test_file.txt\": image_fixtures[\"non_image_file\"]\n        }\n    \n        # 2. 预处理请求\n        request_data = preprocess_request(case, test_user[\"token\"], file_map)  # 使用测试用户的token\n    \n        # 3. 处理所有需要验证码的场景（覆盖注册、更新密码等）\n        json_data = request_data.get(\"json\", {})\n>       verify_code_placeholder = json_data.get(\"verifyCode\", \"\").strip()\nE       AttributeError: 'NoneType' object has no attribute 'strip'\n\ntests\\test_user_auth.py:67: AttributeError","steps":[{"name":"从数据库获取验证码：'test_kkk7is@example.com'","time":{"start":1753988716452,"stop":1753988716467,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'test_kkk7is@example.com'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[{"uid":"4a7ccff07c75a57d","name":"log","source":"4a7ccff07c75a57d.txt","type":"text/plain","size":1437},{"uid":"c464bea827247278","name":"stderr","source":"c464bea827247278.txt","type":"text/plain","size":1080}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false,"stepsCount":1},"afterStages":[{"name":"non_image_file::0","time":{"start":1753988716478,"stop":1753988716479,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_png_image::0","time":{"start":1753988716480,"stop":1753988716483,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"small_png_image::0","time":{"start":1753988716485,"stop":1753988716485,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"large_jpg_image::0","time":{"start":1753988716487,"stop":1753988716491,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"small_jpg_image::0","time":{"start":1753988716493,"stop":1753988716495,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"test_user::0","time":{"start":1753988716496,"stop":1753988716505,"duration":9},"status":"passed","steps":[{"name":"清理测试数据：'test_tvralb@example.com'","time":{"start":1753988716496,"stop":1753988716505,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'test_tvralb@example.com'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":1}],"labels":[{"name":"feature","value":"用户认证模块"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_user_auth"},{"name":"host","value":"CYJ"},{"name":"thread","value":"20208-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_user_auth"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'case_id': 'auth_013', 'name': '密码与确认密码不一致', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_63rnlf', 'password': 'Test123', 'confirmPassword': 'Test124', 'email': 'test_kkk7is@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '两次输入的密码不一致'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":[]},"source":"a23a69c5ea6ce23a.json","parameterValues":["{'case_id': 'auth_013', 'name': '密码与确认密码不一致', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_63rnlf', 'password': 'Test123', 'confirmPassword': 'Test124', 'email': 'test_kkk7is@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '两次输入的密码不一致'}"]}