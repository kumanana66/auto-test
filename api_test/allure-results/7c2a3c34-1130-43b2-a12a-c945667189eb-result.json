{"name": "test_user_auth[dynamic_test_user0-case16]", "status": "broken", "statusDetails": {"message": "AttributeError: 'list' object has no attribute 'get'", "trace": "request = <SubRequest 'dynamic_test_user' for <Function test_user_auth[dynamic_test_user0-case16]>>\n\n    @pytest.fixture(scope=\"function\")\n    def dynamic_test_user(request):\n        \"\"\"根据用例是否需要认证，动态创建测试用户\"\"\"\n        case = request.param  # 通过param传递当前用例\n        need_auth = False\n    \n        # 自动判断是否需要认证：包含Authorization头或需要验证码+token的场景\n        if \"headers\" in case and \"Authorization\" in case[\"headers\"]:\n            need_auth = True\n>       json_data = case.get(\"json\", {})\nE       AttributeError: 'list' object has no attribute 'get'\n\ntests\\test_user_auth.py:78: AttributeError"}, "parameters": [{"name": "dynamic_test_user", "value": "[{'case_id': 'auth_001', 'name': '用户注册成功', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_user_o0se8s', 'password': 'Test123456', 'email': 'test_nqy3ju@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 200, 'expected_success': True, 'expected_message': '注册成功', 'setup': '需要先获取邮箱验证码', 'teardown': '删除测试用户'}, {'case_id': 'auth_002', 'name': '用户名长度为6位（最小值）', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test01', 'password': 'Test123456', 'email': 'test_ab53z7@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 200, 'expected_success': True, 'expected_message': '注册成功'}, {'case_id': 'auth_003', 'name': '用户名长度为20位（最大值）', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test0000000000000001', 'password': 'Test123456', 'email': 'test_v2f4r3@example.com', 'verifyCode': '{verify_code}'}, 'expected_code': 200, 'expected_success': True, 'expected_message': '注册成功'}, {'case_id': 'auth_004', 'name': '用户名长度不足6位', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test1', 'password': 'Test123456', 'email': 'test_vpfph3@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '用户名长度需在6-20位之间'}, {'case_id': 'auth_005', 'name': '用户名长度超过20位', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test00000000000000001', 'password': 'Test123456', 'email': 'test_w51v69@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '用户名长度需在6-20位之间'}, {'case_id': 'auth_006', 'name': '用户名包含特殊符号', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test@1', 'password': 'Test123456', 'email': 'test_km7gz1@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '用户名格式无效（仅支持中文、英文、数字、下划线）'}, {'case_id': 'auth_007', 'name': '用户名已被注册', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'admin1155', 'password': 'Test123456', 'email': 'test_9m1t7z@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '用户名已被注册'}, {'case_id': 'auth_008', 'name': '密码长度不足8位', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_3bntjh', 'password': 'Test123', 'email': 'test_xe93kt@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '密码长度需在8-20位之间'}, {'case_id': 'auth_009', 'name': '密码长度超过20位', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_ozox0s', 'password': 'Test12345678910111213', 'email': 'test_k0du49@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '密码长度需在8-20位之间'}, {'case_id': 'auth_010', 'name': '密码仅包含小写字母', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_hl8nyl', 'password': 'testtest', 'email': 'test_uygco4@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '密码强度不足，需至少包含大小写字母和数字中的两类'}, {'case_id': 'auth_011', 'name': '密码仅包含大写字母', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_wu449c', 'password': 'TESTTEST', 'email': 'test_mspvfu@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '密码强度不足，需至少包含大小写字母和数字中的两类'}, {'case_id': 'auth_012', 'name': '密码仅包含数字', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_f7mtb3', 'password': '123456789', 'email': 'test_b3t8sl@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '密码强度不足，需至少包含大小写字母和数字中的两类'}, {'case_id': 'auth_013', 'name': '密码与确认密码不一致', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_rkhecv', 'password': 'Test123', 'confirmPassword': 'Test124', 'email': 'test_mnqr56@example.com', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '两次输入的密码不一致'}, {'case_id': 'auth_014', 'name': '邮箱格式不正确（缺少@）', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_cror2u', 'password': 'Test123456', 'email': 'invalid-email', 'verifyCode': '123'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '请输入正确的邮箱格式'}, {'case_id': 'auth_015', 'name': '验证码过期', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_piblvs', 'password': 'Test123456', 'email': 'test_eg2nol@example.com', 'verifyCode': 'expired_code'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '验证码错误或已过期'}, {'case_id': 'auth_016', 'name': '验证码错误', 'method': 'POST', 'url': '/auth/register', 'json': {'username': 'test_ymzpta', 'password': 'Test123456', 'email': 'test_bdhcry@example.com', 'verifyCode': '654321'}, 'expected_code': 400, 'expected_success': False, 'expected_message': '验证码错误或已过期'}, {'case_id': 'auth_017', 'name': '正确账号密码登录', 'method': 'POST', 'url': '/auth/login', 'json': {'username': 'admin1155', 'password': 'admin1155'}, 'expected_code': 200, 'expected_success': True, 'expected_message': '登录成功', 'extract': {'token': '$.data.token'}}, {'case_id': 'auth_018', 'name': '用户名不存在登录', 'method': 'POST', 'url': '/auth/login', 'json': {'username': 'nonexistent', 'password': 'Test123456'}, 'expected_code': 401, 'expected_success': False, 'expected_message': '用户名或密码错误，请稍后再试'}, {'case_id': 'auth_019', 'name': '密码错误登录', 'method': 'POST', 'url': '/auth/login', 'json': {'username': 'admin1155', 'password': 'Wrong123'}, 'expected_code': 403, 'expected_success': False, 'expected_message': '密码错误，还可重试4次'}, {'case_id': 'auth_020', 'name': '账号锁定后登录', 'method': 'POST', 'url': '/auth/login', 'json': {'username': 'lockeduser', 'password': 'Test123456'}, 'expected_code': 401, 'expected_success': False, 'expected_message': '账号已锁定，请30分钟后再试'}, {'case_id': 'auth_021', 'name': '旧密码正确+新密码符合强度要求', 'method': 'PUT', 'url': '/auth/userinfo', 'headers': {'Authorization': ''}, 'json': {'oldPassword': 'admin1155', 'newPassword': 'NewTest789', 'securityEmail': 'admin1155@example.com', 'verificationCode': '{verify_code}'}, 'expected_code': 200, 'expected_success': True, 'expected_message': '个人信息更新成功'}, {'case_id': 'auth_022', 'name': '旧密码错误', 'method': 'PUT', 'url': '/auth/userinfo', 'headers': {'Authorization': ''}, 'json': {'oldPassword': 'Wrong123', 'newPassword': 'NewTest123', 'securityEmail': 'admin1155@example.com', 'verificationCode': '{verify_code}'}, 'expected_code': 403, 'expected_success': False, 'expected_message': '当前密码不正确'}, {'case_id': 'auth_023', 'name': '新密码与旧密码相同', 'method': 'PUT', 'url': '/auth/userinfo', 'headers': {'Authorization': ''}, 'json': {'oldPassword': 'admin1155', 'newPassword': 'admin1155', 'securityEmail': 'admin1155@example.com', 'verificationCode': '{verify_code}'}, 'expected_code': 403, 'expected_success': False, 'expected_message': '新密码不能与当前密码相同'}, {'case_id': 'auth_024', 'name': '上传2MB以内的JPG图片', 'method': 'POST', 'url': '/auth/upload/avatar', 'headers': {'Authorization': '', 'Content-Type': 'multipart/form-data'}, 'files': {'file': 'test_avatar.jpg'}, 'expected_code': 200, 'expected_success': True, 'expected_content_type': 'application/json'}, {'case_id': 'auth_025', 'name': '上传超过2MB的JPG图片', 'method': 'POST', 'url': '/auth/upload/avatar', 'headers': {'Authorization': '', 'Content-Type': 'multipart/form-data'}, 'files': {'file': 'large_avatar.jpg'}, 'expected_code': 403, 'expected_success': False, 'expected_message': '文件大小不能超过2MB'}, {'case_id': 'auth_026', 'name': '上传2MB以内的PNG图片', 'method': 'POST', 'url': '/auth/upload/avatar', 'headers': {'Authorization': '', 'Content-Type': 'multipart/form-data'}, 'files': {'file': 'test_avatar.png'}, 'expected_code': 200, 'expected_success': True, 'expected_content_type': 'application/json'}, {'case_id': 'auth_027', 'name': '上传超过2MB的PNG图片', 'method': 'POST', 'url': '/auth/upload/avatar', 'headers': {'Authorization': '', 'Content-Type': 'multipart/form-data'}, 'files': {'file': 'large_avatar.png'}, 'expected_code': 403, 'expected_success': False, 'expected_message': '文件大小不能超过2MB'}, {'case_id': 'auth_028', 'name': '上传非图片格式文件', 'method': 'POST', 'url': '/auth/upload/avatar', 'headers': {'Authorization': '', 'Content-Type': 'multipart/form-data'}, 'files': {'file': 'test_file.txt'}, 'expected_code': 403, 'expected_success': False, 'expected_message': '仅支持JPG、PNG格式的图片'}, {'case_id': 'auth_029', 'name': '未登录状态上传头像', 'method': 'POST', 'url': '/auth/upload/avatar', 'headers': {'Content-Type': 'multipart/form-data'}, 'files': {'file': 'test_avatar.png'}, 'expected_code': 403, 'expected_success': False}]"}, {"name": "case", "value": "{'case_id': 'auth_017', 'name': '正确账号密码登录', 'method': 'POST', 'url': '/auth/login', 'json': {'username': 'admin1155', 'password': 'admin1155'}, 'expected_code': 200, 'expected_success': True, 'expected_message': '登录成功', 'extract': {'token': '$.data.token'}}"}], "start": 1754635688584, "stop": 1754635688585, "uuid": "84c24783-1b2e-4e05-9cb6-8edb6cd0f916", "historyId": "29a6dca20c68a6568d27c38413358dbf", "testCaseId": "de18b51a986ebd96b4485f2c6341275e", "fullName": "tests.test_user_auth#test_user_auth", "labels": [{"name": "feature", "value": "用户认证模块"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_user_auth"}, {"name": "host", "value": "CYJ"}, {"name": "thread", "value": "25680-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_user_auth"}], "titlePath": ["tests", "test_user_auth.py"]}